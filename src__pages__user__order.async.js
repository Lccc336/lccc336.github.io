"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9786],{10235:function(j,v,a){a.d(v,{GD:function(){return U},Gj:function(){return d},Iw:function(){return f},LG:function(){return o},MX:function(){return C},PY:function(){return c},QK:function(){return s},RB:function(){return R},Sp:function(){return k},ZZ:function(){return A},_r:function(){return O},aV:function(){return m},b7:function(){return i},dt:function(){return _},fY:function(){return u},if:function(){return b},kh:function(){return T},lz:function(){return B},mg:function(){return P},t0:function(){return n},yC:function(){return Z}});var t=a(87866),p=a(33746),w=p.Z.create({baseURL:"https://api.xxzh.cc",withCredentials:!1,crossDomain:!0,timeout:1e4});function h(r){return request({url:"/task/grab",withCredentials:!1,method:"post",data:r})}function C(){return(0,t.Z)({url:"/products/random",method:"get"})}function _(r){return(0,t.Z)({url:"/products/random/type",method:"get",params:r})}function s(r){return(0,t.Z)({url:"/wishlist/add",method:"post",data:r})}function c(r){return(0,t.Z)({url:"/wishlist/"+r,method:"get"})}function n(r,I){return(0,t.Z)({url:"/wishlist/delete/".concat(r,"/").concat(I),method:"delete"})}function i(r){return(0,t.Z)({url:"/orders/buy",method:"post",data:r})}function o(r){return(0,t.Z)({url:"/orders/buy/all",method:"get",params:r})}function f(r){return(0,t.Z)({url:"/orders/buy/pending",method:"get",params:r})}function d(r){return(0,t.Z)({url:"/orders/buy/processing",method:"get",params:r})}function m(r){return(0,t.Z)({url:"/orders/buy/refunding",method:"get",params:r})}function P(r){return(0,t.Z)({url:"/orders/buy/delivered",method:"get",params:r})}function Z(r){return(0,t.Z)({url:"/products/search",method:"get",params:r})}function u(r){return(0,t.Z)({url:"/shop/".concat(r.shopId,"/available-products"),method:"get",params:r})}function U(r){return(0,t.Z)({url:"/shop/products/priceRange",method:"get",params:r})}function A(r){return(0,t.Z)({url:"/shop/".concat(r.shopId,"/orders"),method:"get",params:r})}function R(r){return(0,t.Z)({url:"/shop/".concat(r,"/products"),method:"get",params:{size:100}})}function k(r){return(0,t.Z)({url:"/shop/".concat(r,"/order/summary"),method:"get",params:{shopId:r}})}function O(r){return(0,t.Z)({url:"/shop/".concat(r.shopId,"/payOrder"),method:"post",data:r})}function b(r){return(0,t.Z)({url:"/shop/listProduct",method:"post",data:r})}function B(r){return(0,t.Z)({url:"/shop/products/editPrice",method:"post",data:r})}function T(r){return(0,t.Z)({url:"/shop/removeProduct",method:"post",data:r})}},34596:function(j,v,a){a.d(v,{FL:function(){return r},H:function(){return R},JR:function(){return T},Kn:function(){return o},S4:function(){return k},Ue:function(){return i},Uy:function(){return L},Vb:function(){return K},_U:function(){return f},an:function(){return C},bZ:function(){return b},eY:function(){return I},iJ:function(){return A},jw:function(){return u},nn:function(){return U},o$:function(){return h},sg:function(){return W},um:function(){return s},wX:function(){return B},x4:function(){return P},yw:function(){return n},z2:function(){return _}});var t=a(87866),p=a(33746),w=p.Z.create({baseURL:"https://api.xxzh.cc",withCredentials:!1,crossDomain:!0,timeout:1e4});function h(e){return w({url:"/user/captcha/getCaptcha",withCredentials:!1,method:"get",params:e})}function C(e){return(0,t.Z)({url:"/user/captcha/getCaptcha",withCredentials:!1,method:"get",params:e})}function _(e){return(0,t.Z)({url:"/auth/register",withCredentials:!1,method:"post",data:e})}function s(e){return(0,t.Z)({url:"/user/user-detail/"+e.userId,withCredentials:!1,method:"get"})}function c(e){return request({url:"/wishlist/"+e.userId,withCredentials:!1,method:"get"})}function n(e){return(0,t.Z)({url:"/message/inbox",withCredentials:!1,method:"get",params:e})}function i(e){var N=e.id;return delete e.id,(0,t.Z)({url:"/address/create?userId="+N,withCredentials:!1,method:"post",data:e})}function o(e){return(0,t.Z)({url:"/address/get",withCredentials:!1,method:"get",params:e})}function f(e){return(0,t.Z)({url:"/address/update?userId="+e.id,withCredentials:!1,method:"post",data:e})}function d(e){return request({url:"/redbag/draw",withCredentials:!1,method:"post",data:e})}function m(e){return request({url:"/user/profit",withCredentials:!1,method:"get",params:e})}function P(e){return(0,t.Z)({url:"/auth/login",withCredentials:!1,method:"post",data:e})}function Z(e){return request({url:"/redbag/signin",withCredentials:!1,method:"post",data:e})}function u(e){return(0,t.Z)({url:"/redbag/signin-and-draw",withCredentials:!1,method:"post",data:e})}function U(e){return(0,t.Z)({url:"/seller/apply",withCredentials:!1,method:"post",data:e})}function A(e){return(0,t.Z)({url:"/loan/apply",withCredentials:!1,method:"post",data:e})}function R(e){return(0,t.Z)({url:"/loan/loan",withCredentials:!1,method:"post",data:e})}function k(e){return(0,t.Z)({url:"/loan/repay",withCredentials:!1,method:"post",data:e})}function O(e){return request({url:"/withdrawal-records/user",withCredentials:!1,method:"post",data:e})}function b(e){return(0,t.Z)({url:"/recharge-records/username",withCredentials:!1,method:"get",params:e})}function B(e){return(0,t.Z)({url:"/recharge-records/user",withCredentials:!1,method:"post",data:e})}function T(e){return(0,t.Z)({url:"/withdrawal-records/username",withCredentials:!1,method:"get",params:e})}function r(e){return(0,t.Z)({url:"/shop/user/"+e,withCredentials:!1,method:"get"})}function I(e){return(0,t.Z)({url:"/user/info/"+e,withCredentials:!1,method:"get"})}function L(e){return(0,t.Z)({url:"/products/uploader-to-userid?uploader="+e.uploader,withCredentials:!1,method:"get"})}function W(e){return(0,t.Z)({url:"/user/eth/get",withCredentials:!1,method:"get",params:e})}function K(e){return(0,t.Z)({url:"/user/tron/get",withCredentials:!1,method:"get",params:e})}function z(e){return request({url:"/user/eth/set",withCredentials:!1,method:"put",data:e})}function F(e){return request({url:"/user/tron/set",withCredentials:!1,method:"put",data:e})}function G(){return fetch("https://api.ipify.org?format=json")}},87866:function(j,v,a){var t=a(31759),p=a.n(t),w=a(33746),h=a(69194),C=a(18015),_=w.Z.create({baseURL:"https://api.xxzh.cc",withCredentials:!1,crossDomain:!0,timeout:1e5});_.interceptors.request.use(function(s){if(s.url==="/auth/register"||s.url==="/auth/login")return s;(s.url==="/user/apply"||s.url==="/loan/apply")&&(s.headers["Content-Type"]="multipart/form-data");var c=localStorage.getItem("token");return c&&(s.headers.Authorization="Bearer "+c),s},function(s){return console.log(s),Promise.reject(s)}),_.interceptors.response.use(function(s){var c,n=s.data;if(console.log("response-->",n),Array.isArray(n))return Promise.resolve(n);if((c=n.data)!==null&&c!==void 0&&c.token&&(localStorage.setItem("token",n.data.token),localStorage.setItem("userInfo",JSON.stringify(n.data.user))),n.code!==200)return h.FN.show({icon:"fail",content:n.message}),Promise.resolve(n);if(n.code===200||n.message==="SUCCESS")return Promise.resolve(n);if(n.code===305||n.code===306){Promise.reject(n||"error");return}else return n.code===403?(h.FN.show({icon:"fail",content:n.message}),C.history.push("/login"),Promise.resolve(n||"error")):Promise.reject(n||"error")},function(s){return console.log(s,"error"),s.status===403&&(h.FN.show({icon:"fail",content:s.message}),localStorage.removeItem("token"),setTimeout(function(){C.history.push("/login")},1e3)),console.log("request error"+s,p()(s)),Promise.reject(s)}),v.Z=_},72283:function(j,v,a){a.d(v,{Bi:function(){return _},Vj:function(){return s},c9:function(){return c},dN:function(){return C}});var t=a(25298),p=a.n(t),w=a(17069),h=a.n(w);function C(n){return isNaN(n)?"0.00":Number(n).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function _(n){var i=new Date(n),o=i.getFullYear(),f=String(i.getMonth()+1).padStart(2,"0"),d=String(i.getDate()).padStart(2,"0"),m="".concat(o,"-").concat(f,"-").concat(d);return m}function s(n,i,o){for(var f={},d=100/o,m=0;m<=o;m++){var P=m*d,Z=(n+(i-n)*P/100).toFixed(2);f[P]=parseFloat(Z)}return f}var c=function(){function n(i){p()(this,n),this.url=i,this.ws=null,this.listeners=[],this.onOpenCallbacks=[],this.onCloseCallbacks=[],this.onErrorCallbacks=[]}return h()(n,[{key:"connect",value:function(){var o=this;this.ws||(this.ws=new window.WebSocket(this.url),this.ws.onopen=function(){o.onOpenCallbacks.forEach(function(f){return f()})},this.ws.onmessage=function(f){var d=f.data;try{d=JSON.parse(d)}catch(m){}o.listeners.forEach(function(m){return m(d)})},this.ws.onclose=function(f){o.onCloseCallbacks.forEach(function(d){return d(f)})},this.ws.onerror=function(f){o.onErrorCallbacks.forEach(function(d){return d(f)})})}},{key:"send",value:function(o){console.log(this.ws,"this.ws"),!(!this.ws||this.ws.readyState!==1)&&(typeof o!="string"&&(o=JSON.stringify(o)),this.ws.send(o))}},{key:"onMessage",value:function(o){this.listeners.push(o)}},{key:"close",value:function(){this.ws&&(this.ws.close(),this.ws=null)}},{key:"onOpen",value:function(o){this.onOpenCallbacks.push(o)}},{key:"onClose",value:function(o){this.onCloseCallbacks.push(o)}},{key:"onError",value:function(o){this.onErrorCallbacks.push(o)}}]),n}()},84908:function(j,v,a){var t=a(69194),p=a(75271),w=a(5791),h=a(52676),C=function(s){var c=s.title,n=(0,w.s0)(),i=function(){n(-1)};return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(t.l2,{onBack:i,style:{background:"#fff",position:"sticky",top:0,zIndex:1e3},children:c})})};v.Z=C},4063:function(j,v,a){a.r(v),a.d(v,{default:function(){return R}});var t=a(90228),p=a.n(t),w=a(15558),h=a.n(w),C=a(87999),_=a.n(C),s=a(48305),c=a.n(s),n=a(69194),i={indexContainer:"indexContainer___mFp27",item:"item___wUBeg",itemRight:"itemRight___MiCBP"},o=a(72283),f=a(34596),d=a(75271),m=a(10235),P=a(84908),Z=a(59739),u=a(52676),U=function(O){var b={0:m.LG,1:m.Iw,2:m.Gj,3:m.mg,4:m.aV};return b[O]||null},A=function(){var O=(0,d.useState)({}),b=c()(O,2),B=b[0],T=b[1],r=(0,d.useState)(0),I=c()(r,2),L=I[0],W=I[1],K=(0,d.useState)([]),z=c()(K,2),F=z[0],G=z[1],e=(0,d.useState)(0),N=c()(e,2),V=N[0],$=N[1],X=(0,d.useState)(!0),Y=c()(X,2),q=Y[0],H=Y[1],ee=(0,Z.$G)(),y=ee.t,te=function(){var l=_()(p()().mark(function g(){var E,D,x;return p()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return E=JSON.parse(localStorage.getItem("userInfo")),D=U(L),S.next=4,D({buyerName:E.username,page:V});case 4:if(x=S.sent,x.data.content.length!=0){S.next=7;break}return S.abrupt("return",H(!1));case 7:G(function(Q){return[].concat(h()(Q),h()(x.data.content)).length>=x.data.totalElements&&H(!1),$(V+1),[].concat(h()(Q),h()(x.data.content))});case 8:case"end":return S.stop()}},g)}));return function(){return l.apply(this,arguments)}}(),J=[{key:"0",title:y("order.all")},{key:"1",title:y("order.pending")},{key:"2",title:y("order.processing")},{key:"3",title:y("order.delivered")},{key:"4",title:y("order.refunding")}],re=function(){var l=_()(p()().mark(function g(){var E,D;return p()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return E=JSON.parse(localStorage.getItem("userInfo")),M.next=3,(0,f.um)({userId:E.id});case 3:D=M.sent,T(D.data);case 5:case"end":return M.stop()}},g)}));return function(){return l.apply(this,arguments)}}(),ne=function(){var l=_()(p()().mark(function g(E){return p()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:G([]),$(0),H(!0);case 3:case"end":return x.stop()}},g)}));return function(E){return l.apply(this,arguments)}}();return(0,d.useEffect)(function(){re()},[]),(0,u.jsxs)("div",{className:i.indexContainer,children:[(0,u.jsxs)("div",{className:i.indexBody,children:[(0,u.jsx)(P.Z,{title:y("order.myOrders")}),(0,u.jsxs)(n.t8,{onRefresh:function(){console.log("PullToRefresh")},canReleaseText:"Pull to refresh",completeText:"Success",children:[(0,u.jsx)(n.mQ,{activeKey:J[L].key,style:{"--title-font-size":"18px","--content-padding":"18px","--active-line-color":"#333","--active-title-color":"#333"},onChange:function(g){var E=J.findIndex(function(D){return D.key===g});ne(g),W(E)},children:J.map(function(l){return(0,u.jsx)(n.mQ.Tab,{title:l.title},l.key)})}),F.length>0?(0,u.jsx)(n.aV,{style:{"--border-top":"none","--border-bottom":"none"},children:F.map(function(l,g){return(0,u.jsx)(n.aV.Item,{description:(0,u.jsx)("span",{style:{color:"#666",fontSize:20},children:l.content}),extra:(0,u.jsx)("span",{style:{color:"#aaa",fontSize:18},children:l.time}),onClick:function(){return handleRead(l.id)},style:{fontWeight:l.unread?700:400,background:l.unread?"linear-gradient(90deg, #f5f7fa 0%, #fff 100%)":"#fff",borderRadius:8,margin:"8px 16px",boxShadow:l.unread?"0 2px 8px rgba(60,80,120,0.06)":"none"},children:(0,u.jsxs)("div",{className:i.item,children:[(0,u.jsx)("div",{children:(0,u.jsx)("img",{src:"https://api.xxzh.cc"+l.product.imagePath,alt:""})}),(0,u.jsxs)("div",{className:i.itemRight,children:[(0,u.jsx)(n.mH,{direction:"end",rows:2,content:l.product.name}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("p",{children:[y("order.orderNum"),": ",l.orderNumber]}),(0,u.jsxs)("p",{children:[y("order.time"),": ",l.createdAt]}),(0,u.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,u.jsxs)("span",{children:[y("order.totalAmount"),": ",l.totalAmount]}),(0,u.jsx)(n.Vp,{color:"warning",style:{fontSize:"12px"},children:l.status})]})]})]})]})},g)})}):(0,u.jsx)(n.HY,{style:{padding:"64px 0"},imageStyle:{width:128},description:y("order.noData")})]})]}),(0,u.jsx)(n.v_,{loadMore:te,hasMore:q})]})},R=A}}]);
