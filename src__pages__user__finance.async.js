"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3303],{34596:function(x,v,n){n.d(v,{FL:function(){return L},H:function(){return R},JR:function(){return k},Kn:function(){return i},S4:function(){return P},Ue:function(){return s},Uy:function(){return B},Vb:function(){return N},_U:function(){return u},an:function(){return C},bZ:function(){return S},eY:function(){return j},iJ:function(){return A},jw:function(){return Z},nn:function(){return c},o$:function(){return d},sg:function(){return M},um:function(){return a},wX:function(){return T},x4:function(){return r},yw:function(){return t},z2:function(){return f}});var o=n(87866),_=n(33746),g=_.Z.create({baseURL:"https://api.xxzh.cc",withCredentials:!1,crossDomain:!0,timeout:1e4});function d(e){return g({url:"/user/captcha/getCaptcha",withCredentials:!1,method:"get",params:e})}function C(e){return(0,o.Z)({url:"/user/captcha/getCaptcha",withCredentials:!1,method:"get",params:e})}function f(e){return(0,o.Z)({url:"/auth/register",withCredentials:!1,method:"post",data:e})}function a(e){return(0,o.Z)({url:"/user/user-detail/"+e.userId,withCredentials:!1,method:"get"})}function h(e){return request({url:"/wishlist/"+e.userId,withCredentials:!1,method:"get"})}function t(e){return(0,o.Z)({url:"/message/inbox",withCredentials:!1,method:"get",params:e})}function s(e){var I=e.id;return delete e.id,(0,o.Z)({url:"/address/create?userId="+I,withCredentials:!1,method:"post",data:e})}function i(e){return(0,o.Z)({url:"/address/get",withCredentials:!1,method:"get",params:e})}function u(e){return(0,o.Z)({url:"/address/update?userId="+e.id,withCredentials:!1,method:"post",data:e})}function l(e){return request({url:"/redbag/draw",withCredentials:!1,method:"post",data:e})}function p(e){return request({url:"/user/profit",withCredentials:!1,method:"get",params:e})}function r(e){return(0,o.Z)({url:"/auth/login",withCredentials:!1,method:"post",data:e})}function O(e){return request({url:"/redbag/signin",withCredentials:!1,method:"post",data:e})}function Z(e){return(0,o.Z)({url:"/redbag/signin-and-draw",withCredentials:!1,method:"post",data:e})}function c(e){return(0,o.Z)({url:"/seller/apply",withCredentials:!1,method:"post",data:e})}function A(e){return(0,o.Z)({url:"/loan/apply",withCredentials:!1,method:"post",data:e})}function R(e){return(0,o.Z)({url:"/loan/loan",withCredentials:!1,method:"post",data:e})}function P(e){return(0,o.Z)({url:"/loan/repay",withCredentials:!1,method:"post",data:e})}function E(e){return request({url:"/withdrawal-records/user",withCredentials:!1,method:"post",data:e})}function S(e){return(0,o.Z)({url:"/recharge-records/username",withCredentials:!1,method:"get",params:e})}function T(e){return(0,o.Z)({url:"/recharge-records/user",withCredentials:!1,method:"post",data:e})}function k(e){return(0,o.Z)({url:"/withdrawal-records/username",withCredentials:!1,method:"get",params:e})}function L(e){return(0,o.Z)({url:"/shop/user/"+e,withCredentials:!1,method:"get"})}function j(e){return(0,o.Z)({url:"/user/info/"+e,withCredentials:!1,method:"get"})}function B(e){return(0,o.Z)({url:"/products/uploader-to-userid?uploader="+e.uploader,withCredentials:!1,method:"get"})}function M(e){return(0,o.Z)({url:"/user/eth/get",withCredentials:!1,method:"get",params:e})}function N(e){return(0,o.Z)({url:"/user/tron/get",withCredentials:!1,method:"get",params:e})}function W(e){return request({url:"/user/eth/set",withCredentials:!1,method:"put",data:e})}function F(e){return request({url:"/user/tron/set",withCredentials:!1,method:"put",data:e})}function K(){return fetch("https://api.ipify.org?format=json")}},87866:function(x,v,n){var o=n(31759),_=n.n(o),g=n(33746),d=n(69194),C=n(18015),f=g.Z.create({baseURL:"https://api.xxzh.cc",withCredentials:!1,crossDomain:!0,timeout:1e5});f.interceptors.request.use(function(a){if(a.url==="/auth/register"||a.url==="/auth/login")return a;(a.url==="/user/apply"||a.url==="/loan/apply")&&(a.headers["Content-Type"]="multipart/form-data");var h=localStorage.getItem("token");return h&&(a.headers.Authorization="Bearer "+h),a},function(a){return console.log(a),Promise.reject(a)}),f.interceptors.response.use(function(a){var h,t=a.data;if(console.log("response-->",t),Array.isArray(t))return Promise.resolve(t);if((h=t.data)!==null&&h!==void 0&&h.token&&(localStorage.setItem("token",t.data.token),localStorage.setItem("userInfo",JSON.stringify(t.data.user))),t.code!==200)return d.FN.show({icon:"fail",content:t.message}),Promise.resolve(t);if(t.code===200||t.message==="SUCCESS")return Promise.resolve(t);if(t.code===305||t.code===306){Promise.reject(t||"error");return}else return t.code===403?(d.FN.show({icon:"fail",content:t.message}),C.history.push("/login"),Promise.resolve(t||"error")):Promise.reject(t||"error")},function(a){return console.log(a,"error"),a.status===403&&(d.FN.show({icon:"fail",content:a.message}),localStorage.removeItem("token"),setTimeout(function(){C.history.push("/login")},1e3)),console.log("request error"+a,_()(a)),Promise.reject(a)}),v.Z=f},72283:function(x,v,n){n.d(v,{Bi:function(){return f},Vj:function(){return a},c9:function(){return h},dN:function(){return C}});var o=n(25298),_=n.n(o),g=n(17069),d=n.n(g);function C(t){return isNaN(t)?"0.00":Number(t).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function f(t){var s=new Date(t),i=s.getFullYear(),u=String(s.getMonth()+1).padStart(2,"0"),l=String(s.getDate()).padStart(2,"0"),p="".concat(i,"-").concat(u,"-").concat(l);return p}function a(t,s,i){for(var u={},l=100/i,p=0;p<=i;p++){var r=p*l,O=(t+(s-t)*r/100).toFixed(2);u[r]=parseFloat(O)}return u}var h=function(){function t(s){_()(this,t),this.url=s,this.ws=null,this.listeners=[],this.onOpenCallbacks=[],this.onCloseCallbacks=[],this.onErrorCallbacks=[]}return d()(t,[{key:"connect",value:function(){var i=this;this.ws||(this.ws=new window.WebSocket(this.url),this.ws.onopen=function(){i.onOpenCallbacks.forEach(function(u){return u()})},this.ws.onmessage=function(u){var l=u.data;try{l=JSON.parse(l)}catch(p){}i.listeners.forEach(function(p){return p(l)})},this.ws.onclose=function(u){i.onCloseCallbacks.forEach(function(l){return l(u)})},this.ws.onerror=function(u){i.onErrorCallbacks.forEach(function(l){return l(u)})})}},{key:"send",value:function(i){console.log(this.ws,"this.ws"),!(!this.ws||this.ws.readyState!==1)&&(typeof i!="string"&&(i=JSON.stringify(i)),this.ws.send(i))}},{key:"onMessage",value:function(i){this.listeners.push(i)}},{key:"close",value:function(){this.ws&&(this.ws.close(),this.ws=null)}},{key:"onOpen",value:function(i){this.onOpenCallbacks.push(i)}},{key:"onClose",value:function(i){this.onCloseCallbacks.push(i)}},{key:"onError",value:function(i){this.onErrorCallbacks.push(i)}}]),t}()},84908:function(x,v,n){var o=n(69194),_=n(75271),g=n(5791),d=n(52676),C=function(a){var h=a.title,t=(0,g.s0)(),s=function(){t(-1)};return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(o.l2,{onBack:s,style:{background:"#fff",position:"sticky",top:0,zIndex:1e3},children:h})})};v.Z=C},76052:function(x,v,n){n.r(v),n.d(v,{default:function(){return O}});var o=n(90228),_=n.n(o),g=n(87999),d=n.n(g),C=n(48305),f=n.n(C),a=n(75271),h=n(84908),t=n(69194),s={finance:"finance___QHcLo",title:"title___rh5LJ",content:"content___dOvsR",number:"number___TJ4qR",button:"button____Gz64",overlayContent:"overlayContent___xiAgF"},i=n(34596),u=n(5791),l=n(72283),p=n(59739),r=n(52676);function O(){var Z=(0,p.$G)(),c=Z.t,A=(0,u.s0)(),R=(0,a.useState)({}),P=f()(R,2),E=P[0],S=P[1],T=(0,a.useState)(0),k=f()(T,2),L=k[0],j=k[1],B=(0,a.useState)(0),M=f()(B,2),N=M[0],W=M[1],F=(0,a.useState)(""),K=f()(F,2),e=K[0],I=K[1],J=function(){var w=d()(_()().mark(function y(){var b,U;return _()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return b=JSON.parse(localStorage.getItem("userInfo")),S(b),D.next=4,(0,i.um)({userId:b.id});case 4:U=D.sent,U.code==200&&S(U.data.user);case 6:case"end":return D.stop()}},y)}));return function(){return w.apply(this,arguments)}}(),z=function(){var w=d()(_()().mark(function y(){var b;return _()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(N!=0){m.next=6;break}return m.next=3,(0,i.H)({userId:E.id,loanAmount:e});case 3:m.t0=m.sent,m.next=9;break;case 6:return m.next=8,(0,i.S4)({userId:E.id,repayAmount:e});case 8:m.t0=m.sent;case 9:b=m.t0,b.code==200&&(t.FN.show({content:b.message,icon:"success"}),j(!1),I(""),J());case 11:case"end":return m.stop()}},y)}));return function(){return w.apply(this,arguments)}}();return(0,a.useEffect)(function(){J()},[]),(0,r.jsxs)("div",{style:{padding:"0 0 32px 0"},className:s.address,children:[(0,r.jsx)(h.Z,{title:c("finance.myLoan"),style:{height:"100px"}}),(0,r.jsx)(t.zd,{visible:L,onMaskClick:function(){return j(!1)},children:(0,r.jsx)("div",{className:s.overlayContent,children:(0,r.jsxs)(t.Zb,{children:[(0,r.jsx)("h1",{children:N==0?c("finance.loanRequest"):c("finance.repay")}),(0,r.jsxs)("div",{className:s.content,children:[(0,r.jsx)("input",{type:"number",value:e,onChange:function(y){return I(y.target.value)},placeholder:c("finance.enterAmount")}),(0,r.jsx)("div",{className:s.button,onClick:function(){return z()},children:c("finance.submit")})]})]})})}),(0,r.jsx)("div",{className:s.finance,children:E.borrowable?(0,r.jsxs)(t.Zb,{children:[(0,r.jsx)("div",{className:s.title,children:(0,r.jsx)("span",{children:c("finance.loanRequest")})}),(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-around"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:s.content,children:c("finance.yourCredit")}),(0,r.jsxs)("div",{className:s.number,children:["$ ",(0,l.dN)(E.credit||0)]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:s.content,children:c("finance.yourDebt")}),(0,r.jsxs)("div",{className:s.number,children:["$ ",(0,l.dN)(E.debtAmount||0)]})]})]}),(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-around"},children:[(0,r.jsx)("div",{className:s.button,style:{background:"#f5f7fa",color:"#000"},onClick:function(){W(0),j(!0)},children:c("finance.borrow")}),(0,r.jsx)("div",{className:s.button,onClick:function(){j(!0),W(1)},children:c("finance.repay")})]})]}):(0,r.jsxs)(t.Zb,{children:[(0,r.jsx)("div",{className:s.title,children:(0,r.jsx)("span",{children:c("finance.loanRequest")})}),(0,r.jsx)("div",{className:s.content,children:c("finance.noLoanAvailable")}),(0,r.jsx)("div",{className:s.number,children:"?????"}),(0,r.jsx)("div",{className:s.button,onClick:function(){A("/user/approve")},children:c("finance.applyLoan")})]})}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{})]})}}}]);
