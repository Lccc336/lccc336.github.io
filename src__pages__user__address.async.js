"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9339],{34596:function(Z,g,r){r.d(g,{FL:function(){return _},H:function(){return F},JR:function(){return T},Kn:function(){return s},S4:function(){return b},Ue:function(){return w},Uy:function(){return x},Vb:function(){return A},_U:function(){return M},an:function(){return v},bZ:function(){return R},eY:function(){return P},iJ:function(){return j},jw:function(){return S},nn:function(){return U},o$:function(){return l},sg:function(){return W},um:function(){return n},wX:function(){return K},x4:function(){return O},yw:function(){return a},z2:function(){return d}});var t=r(87866),m=r(33746),C=m.Z.create({baseURL:"https://api.xxzh.cc",withCredentials:!1,crossDomain:!0,timeout:1e4});function l(e){return C({url:"/user/captcha/getCaptcha",withCredentials:!1,method:"get",params:e})}function v(e){return(0,t.Z)({url:"/user/captcha/getCaptcha",withCredentials:!1,method:"get",params:e})}function d(e){return(0,t.Z)({url:"/auth/register",withCredentials:!1,method:"post",data:e})}function n(e){return(0,t.Z)({url:"/user/user-detail/"+e.userId,withCredentials:!1,method:"get"})}function i(e){return request({url:"/wishlist/"+e.userId,withCredentials:!1,method:"get"})}function a(e){return(0,t.Z)({url:"/message/inbox",withCredentials:!1,method:"get",params:e})}function w(e){var B=e.id;return delete e.id,(0,t.Z)({url:"/address/create?userId="+B,withCredentials:!1,method:"post",data:e})}function s(e){return(0,t.Z)({url:"/address/get",withCredentials:!1,method:"get",params:e})}function M(e){return(0,t.Z)({url:"/address/update?userId="+e.id,withCredentials:!1,method:"post",data:e})}function E(e){return request({url:"/redbag/draw",withCredentials:!1,method:"post",data:e})}function L(e){return request({url:"/user/profit",withCredentials:!1,method:"get",params:e})}function O(e){return(0,t.Z)({url:"/auth/login",withCredentials:!1,method:"post",data:e})}function u(e){return request({url:"/redbag/signin",withCredentials:!1,method:"post",data:e})}function S(e){return(0,t.Z)({url:"/redbag/signin-and-draw",withCredentials:!1,method:"post",data:e})}function U(e){return(0,t.Z)({url:"/seller/apply",withCredentials:!1,method:"post",data:e})}function j(e){return(0,t.Z)({url:"/loan/apply",withCredentials:!1,method:"post",data:e})}function F(e){return(0,t.Z)({url:"/loan/loan",withCredentials:!1,method:"post",data:e})}function b(e){return(0,t.Z)({url:"/loan/repay",withCredentials:!1,method:"post",data:e})}function N(e){return request({url:"/withdrawal-records/user",withCredentials:!1,method:"post",data:e})}function R(e){return(0,t.Z)({url:"/recharge-records/username",withCredentials:!1,method:"get",params:e})}function K(e){return(0,t.Z)({url:"/recharge-records/user",withCredentials:!1,method:"post",data:e})}function T(e){return(0,t.Z)({url:"/withdrawal-records/username",withCredentials:!1,method:"get",params:e})}function _(e){return(0,t.Z)({url:"/shop/user/"+e,withCredentials:!1,method:"get"})}function P(e){return(0,t.Z)({url:"/user/info/"+e,withCredentials:!1,method:"get"})}function x(e){return(0,t.Z)({url:"/products/uploader-to-userid?uploader="+e.uploader,withCredentials:!1,method:"get"})}function W(e){return(0,t.Z)({url:"/user/eth/get",withCredentials:!1,method:"get",params:e})}function A(e){return(0,t.Z)({url:"/user/tron/get",withCredentials:!1,method:"get",params:e})}function o(e){return request({url:"/user/eth/set",withCredentials:!1,method:"put",data:e})}function $(e){return request({url:"/user/tron/set",withCredentials:!1,method:"put",data:e})}function z(){return fetch("https://api.ipify.org?format=json")}},87866:function(Z,g,r){var t=r(31759),m=r.n(t),C=r(33746),l=r(69194),v=r(18015),d=C.Z.create({baseURL:"https://api.xxzh.cc",withCredentials:!1,crossDomain:!0,timeout:1e5});d.interceptors.request.use(function(n){if(n.url==="/auth/register"||n.url==="/auth/login")return n;(n.url==="/user/apply"||n.url==="/loan/apply")&&(n.headers["Content-Type"]="multipart/form-data");var i=localStorage.getItem("token");return i&&(n.headers.Authorization="Bearer "+i),n},function(n){return console.log(n),Promise.reject(n)}),d.interceptors.response.use(function(n){var i,a=n.data;if(console.log("response-->",a),Array.isArray(a))return Promise.resolve(a);if((i=a.data)!==null&&i!==void 0&&i.token&&(localStorage.setItem("token",a.data.token),localStorage.setItem("userInfo",JSON.stringify(a.data.user))),a.code!==200)return l.FN.show({icon:"fail",content:a.message}),Promise.resolve(a);if(a.code===200||a.message==="SUCCESS")return Promise.resolve(a);if(a.code===305||a.code===306){Promise.reject(a||"error");return}else return a.code===403?(l.FN.show({icon:"fail",content:a.message}),v.history.push("/login"),Promise.resolve(a||"error")):Promise.reject(a||"error")},function(n){return console.log(n,"error"),n.status===403&&(l.FN.show({icon:"fail",content:n.message}),localStorage.removeItem("token"),setTimeout(function(){v.history.push("/login")},1e3)),console.log("request error"+n,m()(n)),Promise.reject(n)}),g.Z=d},84908:function(Z,g,r){var t=r(69194),m=r(75271),C=r(5791),l=r(52676),v=function(n){var i=n.title,a=(0,C.s0)(),w=function(){a(-1)};return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(t.l2,{onBack:w,style:{background:"#fff",position:"sticky",top:0,zIndex:1e3},children:i})})};g.Z=v},15085:function(Z,g,r){r.r(g),r.d(g,{default:function(){return S}});var t=r(90228),m=r.n(t),C=r(87999),l=r.n(C),v=r(26068),d=r.n(v),n=r(48305),i=r.n(n),a=r(75271),w=r(84908),s=r(69194),M={address:"address___oBMw5"},E=r(34596),L=r(5791),O=r(59739),u=r(52676);function S(){var U=(0,a.useState)(),j=i()(U,2),F=j[0],b=j[1],N=s.l0.useForm(),R=i()(N,1),K=R[0],T=(0,a.useState)({}),_=i()(T,2),P=_[0],x=_[1],W=(0,L.s0)(),A=(0,O.$G)(),o=A.t,$=function(f){b(function(I){return I.map(function(c){return c.id===f?d()(d()({},c),{},{unread:!1}):c})})},z=function(){var y=l()(m()().mark(function f(){var I,c;return m()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return I=JSON.parse(localStorage.getItem("userInfo")),h.next=3,(0,E.Kn)({userId:I.id});case 3:if(c=h.sent,!c.data.address){h.next=7;break}return console.log(c.data.address,"res.data.address"),h.abrupt("return",x(c.data.address));case 7:x({id:1});case 8:case"end":return h.stop()}},f)}));return function(){return y.apply(this,arguments)}}(),e=function(){var y=l()(m()().mark(function f(I){var c,D,h,H;return m()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(c=JSON.parse(localStorage.getItem("userInfo")),D=d()(d()({},I),{},{id:c.id}),!P.city){p.next=8;break}return p.next=5,(0,E._U)(D);case 5:return h=p.sent,h.data&&s.FN.show({icon:"success",content:o("address.updateSuccess")}),p.abrupt("return");case 8:return p.next=10,(0,E.Ue)(D);case 10:H=p.sent,H.data&&s.FN.show({icon:"success",content:o("address.submitSuccess")});case 12:case"end":return p.stop()}},f)}));return function(I){return y.apply(this,arguments)}}(),B=function(f){console.log(f),e(f)};return(0,a.useEffect)(function(){z()},[]),(0,u.jsxs)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #f5f7fa 0%, #e3e8ee 100%)",padding:"0 0 32px 0"},className:M.address,children:[(0,u.jsx)(w.Z,{title:o("address.title"),style:{height:"100px"}}),P.id&&(0,u.jsxs)(s.l0,{layout:"horizontal",onFinish:B,initialValues:P,mode:"card",footer:(0,u.jsxs)(s.zx,{block:!0,type:"submit",color:"primary",size:"large",children:[o("address.submit")," "]}),children:[(0,u.jsx)(s.l0.Item,{required:!0,name:"province",label:o("address.province"),children:(0,u.jsx)(s.II,{placeholder:o("address.inputPlaceholder")})}),(0,u.jsx)(s.l0.Item,{required:!0,name:"city",label:o("address.city"),children:(0,u.jsx)(s.II,{placeholder:o("address.inputPlaceholder")})}),(0,u.jsx)(s.l0.Item,{required:!0,name:"district",label:o("address.district"),children:(0,u.jsx)(s.II,{placeholder:o("address.inputPlaceholder")})}),(0,u.jsx)(s.l0.Item,{required:!0,name:"street",label:o("address.street"),children:(0,u.jsx)(s.II,{placeholder:o("address.inputPlaceholder")})}),(0,u.jsx)(s.l0.Item,{required:!0,name:"detail",label:o("address.detail"),children:(0,u.jsx)(s.II,{placeholder:o("address.inputPlaceholder")})}),(0,u.jsx)(s.l0.Item,{required:!0,name:"country",label:o("address.country"),children:(0,u.jsx)(s.II,{placeholder:o("address.inputPlaceholder")})}),(0,u.jsx)(s.l0.Item,{required:!0,name:"receiverName",label:o("address.receiverName"),children:(0,u.jsx)(s.II,{placeholder:o("address.inputPlaceholder")})}),(0,u.jsx)(s.l0.Item,{required:!0,name:"receiverPhone",label:o("address.receiverPhone"),children:(0,u.jsx)(s.II,{placeholder:o("address.inputPlaceholder")})}),(0,u.jsx)(s.l0.Header,{})]})]})}}}]);
