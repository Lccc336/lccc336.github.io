"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5283],{34596:function(O,i,t){t.d(i,{FL:function(){return P},H:function(){return w},JR:function(){return A},Kn:function(){return p},S4:function(){return I},Ue:function(){return h},Uy:function(){return j},Vb:function(){return B},_U:function(){return g},an:function(){return d},bZ:function(){return R},eY:function(){return T},iJ:function(){return D},jw:function(){return U},nn:function(){return v},o$:function(){return o},sg:function(){return L},um:function(){return n},wX:function(){return M},x4:function(){return _},yw:function(){return a},z2:function(){return l}});var r=t(87866),f=t(33746),m=f.Z.create({baseURL:"https://api.xxzh.cc",withCredentials:!1,crossDomain:!0,timeout:1e4});function o(e){return m({url:"/user/captcha/getCaptcha",withCredentials:!1,method:"get",params:e})}function d(e){return(0,r.Z)({url:"/user/captcha/getCaptcha",withCredentials:!1,method:"get",params:e})}function l(e){return(0,r.Z)({url:"/auth/register",withCredentials:!1,method:"post",data:e})}function n(e){return(0,r.Z)({url:"/user/user-detail/"+e.userId,withCredentials:!1,method:"get"})}function u(e){return request({url:"/wishlist/"+e.userId,withCredentials:!1,method:"get"})}function a(e){return(0,r.Z)({url:"/message/inbox",withCredentials:!1,method:"get",params:e})}function h(e){var W=e.id;return delete e.id,(0,r.Z)({url:"/address/create?userId="+W,withCredentials:!1,method:"post",data:e})}function p(e){return(0,r.Z)({url:"/address/get",withCredentials:!1,method:"get",params:e})}function g(e){return(0,r.Z)({url:"/address/update?userId="+e.id,withCredentials:!1,method:"post",data:e})}function x(e){return request({url:"/redbag/draw",withCredentials:!1,method:"post",data:e})}function S(e){return request({url:"/user/profit",withCredentials:!1,method:"get",params:e})}function _(e){return(0,r.Z)({url:"/auth/login",withCredentials:!1,method:"post",data:e})}function K(e){return request({url:"/redbag/signin",withCredentials:!1,method:"post",data:e})}function U(e){return(0,r.Z)({url:"/redbag/signin-and-draw",withCredentials:!1,method:"post",data:e})}function v(e){return(0,r.Z)({url:"/seller/apply",withCredentials:!1,method:"post",data:e})}function D(e){return(0,r.Z)({url:"/loan/apply",withCredentials:!1,method:"post",data:e})}function w(e){return(0,r.Z)({url:"/loan/loan",withCredentials:!1,method:"post",data:e})}function I(e){return(0,r.Z)({url:"/loan/repay",withCredentials:!1,method:"post",data:e})}function y(e){return request({url:"/withdrawal-records/user",withCredentials:!1,method:"post",data:e})}function R(e){return(0,r.Z)({url:"/recharge-records/username",withCredentials:!1,method:"get",params:e})}function M(e){return(0,r.Z)({url:"/recharge-records/user",withCredentials:!1,method:"post",data:e})}function A(e){return(0,r.Z)({url:"/withdrawal-records/username",withCredentials:!1,method:"get",params:e})}function P(e){return(0,r.Z)({url:"/shop/user/"+e,withCredentials:!1,method:"get"})}function T(e){return(0,r.Z)({url:"/user/info/"+e,withCredentials:!1,method:"get"})}function j(e){return(0,r.Z)({url:"/products/uploader-to-userid?uploader="+e.uploader,withCredentials:!1,method:"get"})}function L(e){return(0,r.Z)({url:"/user/eth/get",withCredentials:!1,method:"get",params:e})}function B(e){return(0,r.Z)({url:"/user/tron/get",withCredentials:!1,method:"get",params:e})}function s(e){return request({url:"/user/eth/set",withCredentials:!1,method:"put",data:e})}function C(e){return request({url:"/user/tron/set",withCredentials:!1,method:"put",data:e})}function E(){return fetch("https://api.ipify.org?format=json")}},87866:function(O,i,t){var r=t(31759),f=t.n(r),m=t(33746),o=t(69194),d=t(18015),l=m.Z.create({baseURL:"https://api.xxzh.cc",withCredentials:!1,crossDomain:!0,timeout:1e5});l.interceptors.request.use(function(n){if(n.url==="/auth/register"||n.url==="/auth/login")return n;(n.url==="/user/apply"||n.url==="/loan/apply")&&(n.headers["Content-Type"]="multipart/form-data");var u=localStorage.getItem("token");return u&&(n.headers.Authorization="Bearer "+u),n},function(n){return console.log(n),Promise.reject(n)}),l.interceptors.response.use(function(n){var u,a=n.data;if(console.log("response-->",a),Array.isArray(a))return Promise.resolve(a);if((u=a.data)!==null&&u!==void 0&&u.token&&(localStorage.setItem("token",a.data.token),localStorage.setItem("userInfo",JSON.stringify(a.data.user))),a.code!==200)return o.FN.show({icon:"fail",content:a.message}),Promise.resolve(a);if(a.code===200||a.message==="SUCCESS")return Promise.resolve(a);if(a.code===305||a.code===306){Promise.reject(a||"error");return}else return a.code===403?(o.FN.show({icon:"fail",content:a.message}),d.history.push("/login"),Promise.resolve(a||"error")):Promise.reject(a||"error")},function(n){return console.log(n,"error"),n.status===403&&(o.FN.show({icon:"fail",content:n.message}),localStorage.removeItem("token"),setTimeout(function(){d.history.push("/login")},1e3)),console.log("request error"+n,f()(n)),Promise.reject(n)}),i.Z=l},84908:function(O,i,t){var r=t(69194),f=t(75271),m=t(5791),o=t(52676),d=function(n){var u=n.title,a=(0,m.s0)(),h=function(){a(-1)};return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(r.l2,{onBack:h,style:{background:"#fff",position:"sticky",top:0,zIndex:1e3},children:u})})};i.Z=d},7098:function(O,i,t){t.r(i),t.d(i,{default:function(){return K}});var r=t(26068),f=t.n(r),m=t(90228),o=t.n(m),d=t(15558),l=t.n(d),n=t(87999),u=t.n(n),a=t(48305),h=t.n(a),p=t(75271),g=t(69194),x=t(84908),S=t(34596),_=t(52676);function K(){var U=(0,p.useState)([]),v=h()(U,2),D=v[0],w=v[1],I=(0,p.useState)(!0),y=h()(I,2),R=y[0],M=y[1],A=(0,p.useState)({page:0}),P=h()(A,2),T=P[0],j=P[1],L=function(){var s=u()(o()().mark(function C(){var E,e;return o()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return E=JSON.parse(localStorage.getItem("userInfo")),c.next=3,(0,S.yw)({receiverId:E.id,page:T.page,size:10});case 3:if(e=c.sent,j(function(b){return{page:b.page+1}}),console.log(e.data,"111"),e.data.length!=0){c.next=8;break}return c.abrupt("return",M(!1));case 8:console.log(e),w(function(b){return[].concat(l()(b),l()(e.data.messages)).length>=e.data.total&&M(!1),[].concat(l()(b),l()(e.data.messages))});case 10:case"end":return c.stop()}},C)}));return function(){return s.apply(this,arguments)}}(),B=function(C){w(function(E){return E.map(function(e){return e.id===C?f()(f()({},e),{},{unread:!1}):e})})};return(0,_.jsxs)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #f5f7fa 0%, #e3e8ee 100%)",padding:"0 0 32px 0"},children:[(0,_.jsx)(x.Z,{title:"Message",style:{height:"100px"}}),D.length>0?(0,_.jsx)(g.aV,{style:{"--border-top":"none","--border-bottom":"none"},children:D.map(function(s){return(0,_.jsx)(g.aV.Item,{description:(0,_.jsx)("span",{style:{color:"#666",fontSize:14},children:s.content}),extra:(0,_.jsx)("span",{style:{color:"#aaa",fontSize:13},children:s.time}),onClick:function(){return B(s.id)},style:{fontWeight:s.unread?700:400,background:s.unread?"linear-gradient(90deg, #f5f7fa 0%, #fff 100%)":"#fff",borderRadius:8,margin:"8px 16px",boxShadow:s.unread?"0 2px 8px rgba(60,80,120,0.06)":"none"},children:(0,_.jsxs)("span",{style:{display:"flex",alignItems:"center"},children:[s.title,s.unread&&(0,_.jsx)("span",{style:{display:"inline-block",width:8,height:8,borderRadius:"50%",background:"#4a90e2",marginLeft:8}})]})},s.id)})}):(0,_.jsx)(g.HY,{style:{padding:"64px 0"},imageStyle:{width:128},description:"\u6682\u65E0\u6570\u636E"}),(0,_.jsx)(g.v_,{loadMore:L,hasMore:R})]})}}}]);
