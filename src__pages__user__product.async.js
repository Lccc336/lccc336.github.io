"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9715],{10235:function(O,v,r){r.d(v,{GD:function(){return A},Gj:function(){return d},Iw:function(){return c},LG:function(){return i},MX:function(){return g},PY:function(){return l},QK:function(){return a},RB:function(){return S},Sp:function(){return R},ZZ:function(){return Z},_r:function(){return w},aV:function(){return f},b7:function(){return s},dt:function(){return m},fY:function(){return n},if:function(){return k},kh:function(){return L},lz:function(){return U},mg:function(){return j},t0:function(){return t},yC:function(){return I}});var o=r(87866),h=r(33746),P=h.Z.create({baseURL:"https://api.xxzh.cc",withCredentials:!1,crossDomain:!0,timeout:1e4});function p(e){return request({url:"/task/grab",withCredentials:!1,method:"post",data:e})}function g(){return(0,o.Z)({url:"/products/random",method:"get"})}function m(e){return(0,o.Z)({url:"/products/random/type",method:"get",params:e})}function a(e){return(0,o.Z)({url:"/wishlist/add",method:"post",data:e})}function l(e){return(0,o.Z)({url:"/wishlist/"+e,method:"get"})}function t(e,N){return(0,o.Z)({url:"/wishlist/delete/".concat(e,"/").concat(N),method:"delete"})}function s(e){return(0,o.Z)({url:"/orders/buy",method:"post",data:e})}function i(e){return(0,o.Z)({url:"/orders/buy/all",method:"get",params:e})}function c(e){return(0,o.Z)({url:"/orders/buy/pending",method:"get",params:e})}function d(e){return(0,o.Z)({url:"/orders/buy/processing",method:"get",params:e})}function f(e){return(0,o.Z)({url:"/orders/buy/refunding",method:"get",params:e})}function j(e){return(0,o.Z)({url:"/orders/buy/delivered",method:"get",params:e})}function I(e){return(0,o.Z)({url:"/products/search",method:"get",params:e})}function n(e){return(0,o.Z)({url:"/shop/".concat(e.shopId,"/available-products"),method:"get",params:e})}function A(e){return(0,o.Z)({url:"/shop/products/priceRange",method:"get",params:e})}function Z(e){return(0,o.Z)({url:"/shop/".concat(e.shopId,"/orders"),method:"get",params:e})}function S(e){return(0,o.Z)({url:"/shop/".concat(e,"/products"),method:"get",params:{size:100}})}function R(e){return(0,o.Z)({url:"/shop/".concat(e,"/order/summary"),method:"get",params:{shopId:e}})}function w(e){return(0,o.Z)({url:"/shop/".concat(e.shopId,"/payOrder"),method:"post",data:e})}function k(e){return(0,o.Z)({url:"/shop/listProduct",method:"post",data:e})}function U(e){return(0,o.Z)({url:"/shop/products/editPrice",method:"post",data:e})}function L(e){return(0,o.Z)({url:"/shop/removeProduct",method:"post",data:e})}},87866:function(O,v,r){var o=r(31759),h=r.n(o),P=r(33746),p=r(69194),g=r(18015),m=P.Z.create({baseURL:"https://api.xxzh.cc",withCredentials:!1,crossDomain:!0,timeout:1e5});m.interceptors.request.use(function(a){if(a.url==="/auth/register"||a.url==="/auth/login")return a;(a.url==="/user/apply"||a.url==="/loan/apply")&&(a.headers["Content-Type"]="multipart/form-data");var l=localStorage.getItem("token");return l&&(a.headers.Authorization="Bearer "+l),a},function(a){return console.log(a),Promise.reject(a)}),m.interceptors.response.use(function(a){var l,t=a.data;if(console.log("response-->",t),Array.isArray(t))return Promise.resolve(t);if((l=t.data)!==null&&l!==void 0&&l.token&&(localStorage.setItem("token",t.data.token),localStorage.setItem("userInfo",JSON.stringify(t.data.user))),t.code!==200)return p.FN.show({icon:"fail",content:t.message}),Promise.resolve(t);if(t.code===200||t.message==="SUCCESS")return Promise.resolve(t);if(t.code===305||t.code===306){Promise.reject(t||"error");return}else return t.code===403?(p.FN.show({icon:"fail",content:t.message}),g.history.push("/login"),Promise.resolve(t||"error")):Promise.reject(t||"error")},function(a){return console.log(a,"error"),a.status===403&&(p.FN.show({icon:"fail",content:a.message}),localStorage.removeItem("token"),setTimeout(function(){g.history.push("/login")},1e3)),console.log("request error"+a,h()(a)),Promise.reject(a)}),v.Z=m},72283:function(O,v,r){r.d(v,{Bi:function(){return m},Vj:function(){return a},c9:function(){return l},dN:function(){return g}});var o=r(25298),h=r.n(o),P=r(17069),p=r.n(P);function g(t){return isNaN(t)?"0.00":Number(t).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function m(t){var s=new Date(t),i=s.getFullYear(),c=String(s.getMonth()+1).padStart(2,"0"),d=String(s.getDate()).padStart(2,"0"),f="".concat(i,"-").concat(c,"-").concat(d);return f}function a(t,s,i){for(var c={},d=100/i,f=0;f<=i;f++){var j=f*d,I=(t+(s-t)*j/100).toFixed(2);c[j]=parseFloat(I)}return c}var l=function(){function t(s){h()(this,t),this.url=s,this.ws=null,this.listeners=[],this.onOpenCallbacks=[],this.onCloseCallbacks=[],this.onErrorCallbacks=[]}return p()(t,[{key:"connect",value:function(){var i=this;this.ws||(this.ws=new window.WebSocket(this.url),this.ws.onopen=function(){i.onOpenCallbacks.forEach(function(c){return c()})},this.ws.onmessage=function(c){var d=c.data;try{d=JSON.parse(d)}catch(f){}i.listeners.forEach(function(f){return f(d)})},this.ws.onclose=function(c){i.onCloseCallbacks.forEach(function(d){return d(c)})},this.ws.onerror=function(c){i.onErrorCallbacks.forEach(function(d){return d(c)})})}},{key:"send",value:function(i){console.log(this.ws,"this.ws"),!(!this.ws||this.ws.readyState!==1)&&(typeof i!="string"&&(i=JSON.stringify(i)),this.ws.send(i))}},{key:"onMessage",value:function(i){this.listeners.push(i)}},{key:"close",value:function(){this.ws&&(this.ws.close(),this.ws=null)}},{key:"onOpen",value:function(i){this.onOpenCallbacks.push(i)}},{key:"onClose",value:function(i){this.onCloseCallbacks.push(i)}},{key:"onError",value:function(i){this.onErrorCallbacks.push(i)}}]),t}()},84908:function(O,v,r){var o=r(69194),h=r(75271),P=r(5791),p=r(52676),g=function(a){var l=a.title,t=(0,P.s0)(),s=function(){t(-1)};return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(o.l2,{onBack:s,style:{background:"#fff",position:"sticky",top:0,zIndex:1e3},children:l})})};v.Z=g},34649:function(O,v,r){r.r(v),r.d(v,{default:function(){return A}});var o=r(90228),h=r.n(o),P=r(15558),p=r.n(P),g=r(87999),m=r.n(g),a=r(48305),l=r.n(a),t=r(75271),s=r(69194),i=r(84908),c=r(10235),d=r(5791),f={finance:"finance___j6l_O",title:"title___A5AlX",content:"content___vWqQ4",number:"number___urEsk",button:"button___WC5ki",overlayContent:"overlayContent___HcFsd"},j=r(72283),I=r(59739),n=r(52676);function A(){var Z=(0,I.$G)(),S=Z.t,R=(0,t.useState)([]),w=l()(R,2),k=w[0],U=w[1],L=(0,t.useState)(!0),e=l()(L,2),N=e[0],T=e[1],V=(0,t.useState)({page:0}),W=l()(V,2),$=W[0],H=W[1],Y=(0,t.useState)(!1),z=l()(Y,2),Q=z[0],B=z[1],X=(0,t.useState)(null),K=l()(X,2),M=K[0],q=K[1],ee=(0,t.useState)(0),F=l()(ee,2),G=F[0],te=F[1],re=(0,t.useState)(0),J=l()(re,2),ne=J[0],oe=J[1],ce=(0,d.s0)();(0,t.useEffect)(function(){window.scrollTo(0,0)},[]);var se=function(){var u=m()(h()().mark(function _(){var x,b,E,y;return h()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return x=JSON.parse(localStorage.getItem("userInfo")),b=$.page+1,C.prev=2,C.next=5,(0,c.fY)({shopId:x.shopId,page:b,size:10});case 5:E=C.sent,y=E.data||[],U(function(le){return[].concat(p()(le),p()(y))}),H({page:b}),y.length<10&&T(!1),C.next=16;break;case 12:C.prev=12,C.t0=C.catch(2),s.FN.show({content:S("product.loadFailed")}),T(!1);case 16:case"end":return C.stop()}},_,null,[[2,12]])}));return function(){return u.apply(this,arguments)}}(),ae=function(){var u=m()(h()().mark(function _(x){var b,E;return h()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return b=JSON.parse(localStorage.getItem("userInfo")),oe(x.id),D.next=4,(0,c.GD)({shopId:b.shopId,productId:x.id});case 4:E=D.sent,q((0,j.Vj)(E.data.minPrice,E.data.maxPrice,5)),B(!0);case 7:case"end":return D.stop()}},_)}));return function(x){return u.apply(this,arguments)}}(),ue=(0,t.useMemo)(function(){return M?M[G]:0},[G,M]),ie=function(){var u=m()(h()().mark(function _(){var x,b;return h()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return x=JSON.parse(localStorage.getItem("userInfo")),y.next=3,(0,c.if)({shopId:x.shopId,productId:ne,chosenPrice:ue});case 3:b=y.sent,b.code===200&&(s.FN.show({icon:"success",content:b.message}),B(!1));case 5:case"end":return y.stop()}},_)}));return function(){return u.apply(this,arguments)}}();return(0,n.jsxs)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #f5f7fa 0%, #e3e8ee 100%)"},children:[(0,n.jsx)("div",{style:{position:"fixed",top:0,width:"100%",zIndex:1e3,background:"#fff",boxShadow:"0 2px 8px rgba(0,0,0,0.05)"},children:(0,n.jsx)(i.Z,{title:S("product.title"),style:{height:"100px"}})}),(0,n.jsx)("div",{style:{height:"50px"}}),(0,n.jsx)(s.zd,{visible:Q,onMaskClick:function(){return B(!1)},children:(0,n.jsx)("div",{className:f.overlayContent,children:(0,n.jsxs)(s.Zb,{children:[(0,n.jsx)("h1",{children:S("product.listProduct")}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsxs)("div",{className:f.content,children:[M&&(0,n.jsx)(s.iR,{marks:M,ticks:!0,onAfterChange:function(_){return te(_)}}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsx)("div",{className:f.button,onClick:ie,children:S("product.submit")})]})]})})}),k.length>0?(0,n.jsx)(s.aV,{style:{"--border-top":"none","--border-bottom":"none"},children:k.map(function(u){return(0,n.jsx)(s.aV.Item,{description:(0,n.jsx)("span",{style:{color:"#666",fontSize:14},children:u.content}),extra:(0,n.jsx)("span",{style:{color:"#aaa",fontSize:13},children:u.time}),style:{fontWeight:u.unread?700:400,background:u.unread?"linear-gradient(90deg, #f5f7fa 0%, #fff 100%)":"#fff",borderRadius:8,margin:"8px 16px",boxShadow:u.unread?"0 2px 8px rgba(60,80,120,0.06)":"none"},children:(0,n.jsxs)("div",{style:{height:"120px",display:"flex",justifyContent:"space-between"},children:[(0,n.jsx)("div",{style:{width:"40%",height:"100%"},children:(0,n.jsx)("img",{src:"https://api.xxzh.cc"+u.imagePath,alt:"",style:{width:"100%",height:"100%",borderRadius:8}})}),(0,n.jsxs)("div",{style:{width:"58%",padding:"10px 0"},children:[(u==null?void 0:u.name)&&(0,n.jsx)(s.mH,{direction:"end",content:u==null?void 0:u.name,rows:2,style:{fontSize:"18px"}}),(0,n.jsx)("br",{}),(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,n.jsxs)("p",{style:{color:"#fb7701",fontSize:"18px"},children:["$ ",Number(u==null?void 0:u.costPrice).toFixed(2),(0,n.jsx)("del",{style:{color:"#333",fontSize:"12px",marginLeft:4},children:Number(u==null?void 0:u.price).toFixed(2)})]}),(0,n.jsx)("button",{onClick:function(){return ae(u)},style:{color:"#fff",background:"#fb7701",padding:"4px 8px",border:"none",fontSize:"14px",borderRadius:"8px"},children:S("product.list")})]})]})]})},u.id)})}):(0,n.jsx)(s.HY,{style:{padding:"64px 0"},imageStyle:{width:128},description:S("product.noData")}),(0,n.jsx)(s.v_,{loadMore:se,hasMore:N})]})}}}]);
